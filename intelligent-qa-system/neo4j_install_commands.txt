#!/bin/bash

echo "=== Neo4j 安装命令 - 请逐步执行 ==="
echo ""
echo "1. 更新包列表："
echo "sudo apt-get update"
echo ""
echo "2. 安装 Java（Neo4j 需要）："
echo "sudo apt-get install -y openjdk-11-jdk"
echo ""
echo "3. 下载并添加 Neo4j 仓库密钥："
echo "wget -O - https://debian.neo4j.com/neotechnology.gpg.key | sudo apt-key add -"
echo ""
echo "4. 添加 Neo4j 仓库："
echo "echo 'deb https://debian.neo4j.com stable 4.4' | sudo tee /etc/apt/sources.list.d/neo4j.list"
echo ""
echo "5. 更新包列表："
echo "sudo apt-get update"
echo ""
echo "6. 安装 Neo4j："
echo "sudo apt-get install -y neo4j=1:4.4.0"
echo ""
echo "7. 启动 Neo4j 服务："
echo "sudo systemctl start neo4j"
echo "sudo systemctl enable neo4j"
echo ""
echo "8. 设置初始密码（这里修改密码）："
echo "sudo neo4j-admin set-initial-password yang1209041527"
echo "   ↑ 如需修改密码，请更改 'yang1209041527' 为您想要的密码"
echo ""
echo "9. 检查服务状态："
echo "sudo systemctl status neo4j"
echo ""
echo "=== 用户名和密码修改说明 ==="
echo "• 用户名：Neo4j 默认管理员用户名 'neo4j' 是固定的，无法修改"
echo "• 密码：在第8步设置 - sudo neo4j-admin set-initial-password 您的密码"
echo "• 如需修改密码，请将 'yang1209041527' 替换为您想要的密码"
echo "• 密码设置后，同时需要更新 .env 文件中的 NEO4J_PASSWORD 配置"
echo ""
echo "如需创建其他用户，请在 Neo4j 浏览器 (http://localhost:7474) 中执行："
echo "CREATE USER your_username SET PASSWORD 'your_password'"
echo "GRANT ROLE admin TO your_username"
echo ""
echo "完成后，Neo4j 将在 http://localhost:7474 运行"
echo "用户名: neo4j"
echo "密码: yang1209041527"